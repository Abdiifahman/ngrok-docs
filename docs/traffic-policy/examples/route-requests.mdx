---
title: Route Request Example
sidebar_label: Route requests
---

import ConfigExample from "/src/components/ConfigExample.tsx";


You can use [CEL
interpolation](/docs/traffic-policy/concepts/cel-interpolation) to
dynamically forward requests to different internal endpoints based on URL
request attributes, including but not limited to:

- URL
- hostname
- path
- headers

This allows you to manage complex traffic
topologies without manually creating and managing each [`forward-internal`
action](/docs/traffic-policy/actions/forward-internal).

## Based on URL

The following example forwards requests from `https://*.example.com` to `https://<SUBDOMAIN>.internal`.

<ConfigExample
	config={{
		on_http_request: [
			{
				name: "Route requests based on URL",
				actions: [
					{
						type: "forward-internal",
						config: {
							url: 'https://${req.host.split(".example.com")[0]}.internal',
						},
					},
				],
			},
		],
	}}
/>


## Based on headers

The following example forwards requests containing a `X-Customer-Value: {CUSTOMER}` header to `https://{CUSTOMER}.internal`.

<ConfigExample
	config={{
		on_http_request: {
			actions: {
				type: "forward-internal",
				config: {
					url: "https://${getReqHeader('X-Customer-Value')[0]}.internal",
				},
			},
		},
	}}
/>