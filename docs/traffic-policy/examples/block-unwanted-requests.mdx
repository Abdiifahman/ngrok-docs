---
title: Block Unwanted Requests Examples
sidebar_label: Block Unwanted Requests
---

With Traffic Policy, you can block unwanted requests to your endpoints. This page demonstrates a few examples of doing so.

## Deny traffic from Tor networks

The following example uses the [connection variables](/traffic-policy/variables/connection/) available in [IP Intelligence](/traffic-policy/variables/ip-intel) to block [Tor](https://en.wikipedia.org/wiki/Tor_(network)) exit node IPs.

## Block bots and crawlers with a `robots.txt`

The following example returns a custom response with a [`robots.txt` file](https://developers.google.com/search/docs/crawling-indexing/robots/intro) to deny search engine or [AI crawlers](https://platform.openai.com/docs/bots/) on all paths.

<AddRobotsTxt />

You can also extend the previous example to create specific rules for crawlers based on their user agent strings, like [`ChatGPT-User` and `GPTBot`](https://platform.openai.com/docs/bots).

<AddRobotsTxtSpecific />

## Block bots and crawlers by user agent

You can also take action on only incoming requests that contain specific strings in the [`req.user_agent` request variable](/http/request-headers/#http).

You can extend the expression to include additional user agents by extending `(chatgpt-user|gptbot)` like so:

```bash
(chatgpt-user|gptbot|anthropic|claude|any|other|user-agent|goes|here)
```

<BlockSpecificBots />

### Deny non-GET requests

The following example denies all inbound traffic that is not a GET request.

<Deny />

### Custom response for unauthorized requests

The following example sends a custom response with status code `401` and body `Unauthorized` for requests without an Authorization header.

<CustomResponse />

### Block traffic from specific countries

The following example demonstrates how to remain compliant with data regulations or sanctions by blocking requests originating from one or more countries using their respective [ISO country codes](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes).

<BlockCountries />

### Limit request sizes

The following example demonstrates how to prevent excessively large user uploads, like text or images, that might cause performance or availability issues for your upstream service.

<LimitSize />
