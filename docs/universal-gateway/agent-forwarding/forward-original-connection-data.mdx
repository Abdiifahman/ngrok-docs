---
title: How Do I Forward Original Connection Data?
---

### TCP

When you forward traffic to an upstream TCP service, becuase traffic is coming
from the ngrok agent, it won't know the client's original IP address. You can
add the [PROXY
protocol](https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt) header
on connections to your upstream service to send connection information like the
original client IP address to your upstream service. You will need to configure
your upstream service to handle the PROXY protocol header.

<Tabs groupId="connectivity" queryString="cty">
	<TabItem value="agent-cli" label="Agent CLI" default>
		<ProxyProtoAgentCliExample />
	</TabItem>
	<TabItem value="agent-config" label="Agent Config">
		<ProxyProtoAgentConfigExample />
	</TabItem>
	<TabItem value="ssh" label="SSH">
		<ProxyProtoSshExample />
	</TabItem>
	<TabItem value="go-sdk" label="Go">
		<ProxyProtoGoSdkExample />
	</TabItem>
	<TabItem value="javascript-sdk" label="Javascript">
		<ProxyProtoJavascriptSdkExample />
	</TabItem>
	<TabItem value="python-sdk" label="Python">
		<ProxyProtoPythonSdkExample />
	</TabItem>
	<TabItem value="rust-sdk" label="Rust">
		<ProxyProtoRustSdkExample />
	</TabItem>
	<TabItem value="k8s" label="Kubernetes Controller">
		<ProxyProtoKubernetesExample />
	</TabItem>
</Tabs>

### TLS

Add a [PROXY
protocol](https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt) header
on connection to your upstream service. This sends connection information like
the original client IP address to your upstream service.

<Tabs groupId="connectivity" queryString="cty">
	<TabItem value="agent-cli" label="Agent CLI" default>
		<ProxyProtoAgentCliExample />
	</TabItem>
	<TabItem value="agent-config" label="Agent Config">
		<ProxyProtoAgentConfigExample />
	</TabItem>
	<TabItem value="ssh" label="SSH">
		<ProxyProtoSshExample />
	</TabItem>
	<TabItem value="go-sdk" label="Go">
		<ProxyProtoGoSdkExample />
	</TabItem>
	<TabItem value="javascript-sdk" label="Javascript">
		<ProxyProtoJavascriptSdkExample />
	</TabItem>
	<TabItem value="python-sdk" label="Python">
		<ProxyProtoPythonSdkExample />
	</TabItem>
	<TabItem value="rust-sdk" label="Rust">
		<ProxyProtoRustSdkExample />
	</TabItem>
	<TabItem value="k8s" label="Kubernetes Controller">
		<ProxyProtoKubernetesExample />
	</TabItem>
</Tabs>
