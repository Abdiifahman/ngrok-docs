---
title: Global Load Balancing for Agents
description: Learn how ngrok's Global Load Balancer improves the resiliency of your ngrok agents, agent SDKs and the Kubernetes Controller.
---

import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";

import ExplicitRegionAgentCliExample from "/examples/agent-cli/explicit-region.mdx";
import ExplicitRegionAgentConfigExample from "/examples/agent-config/explicit-region.mdx";
import ExplicitRegionGoSdkExample from "/examples/go-sdk/explicit-region.mdx";
import ExplicitRegionJavascriptSdkExample from "/examples/javascript-sdk/explicit-region.mdx";
import ExplicitRegionKubernetesExample from "/examples/k8s/explicit-region.mdx";
import ExplicitRegionPythonSdkExample from "/examples/python-sdk/explicit-region.mdx";
import ExplicitRegionRustSdkExample from "/examples/rust-sdk/explicit-region.mdx";
import ExplicitRegionSshExample from "/examples/ssh/explicit-region.mdx";

ngrok's GSLB automatically improves the performance and resiliency of your
ngrok agents, agent SDKs and the Kubernetes Controller. Agents automatically
connect to ngrok's geographically-closest healthy point of presence.

### Acceleration

Similar to endpoints, when an ngrok agent connects, DNS resolution returns the
IPs of the closest ngrok point of presence. Connecting to the closest ngrok
point of presence reduces agent initialization time and also reduces the
latency of connections that are routed to that agent.

### Losing a Point of Presence {#agents-losing-a-pop}

If an ngrok point of presence fails, health checks automatically detect that
failure and update our DNS resolution such that agents will attempt to connect
to the next-closest healthy point of presence.

The ngrok agent connects to a single region at a time. If you want the ngrok
agent to simultaneously connect to multiple regions, you must instead run
multiple ngrok agents and [explicitly disable agent
GSLB](#agents-disabling-gslb).

### Disabling GSLB in the Agent {#agents-disabling-gslb}

You should always prefer to allow the ngrok agent to use GSLB and connect to
the closest point of presence. However, the ngrok agent does support disabling
GSLB and explicitly choosing which point of presence to connect to.

If you wish to configure the agent to use a specific point of presence you may
do so with the following configuration:

<Tabs groupId="connectivity" queryString="cty">
	<TabItem value="agent-cli" label="Agent CLI" default>
		<ExplicitRegionAgentCliExample />
	</TabItem>
	<TabItem value="agent-config" label="Agent Config" default>
		<ExplicitRegionAgentConfigExample />
	</TabItem>
	<TabItem value="ssh" label="SSH">
		<ExplicitRegionSshExample />
	</TabItem>
	<TabItem value="go-sdk" label="Go">
		<ExplicitRegionGoSdkExample />
	</TabItem>
	<TabItem value="javascript-sdk" label="Javascript">
		<ExplicitRegionJavascriptSdkExample />
	</TabItem>
	<TabItem value="python-sdk" label="Python">
		<ExplicitRegionPythonSdkExample />
	</TabItem>
	<TabItem value="rust-sdk" label="Rust">
		<ExplicitRegionRustSdkExample />
	</TabItem>
	<TabItem value="k8s" label="Kubernetes Controller">
		<ExplicitRegionKubernetesExample />
	</TabItem>
</Tabs>

### Legacy Agent Behavior

Beginning with the [ngrok v3
agent](/agent/changelog#ngrok-agent-300---2022-03-28), the agent uses GSLB to
connect to the lowest-latency point point of presence. Prior to that, v2 ngrok
agents would always connect to the US region by default.
